<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Le Dee dentro di Lei</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'blue-dea': '#3b82f6',
            'green-dea': '#10b981',
            'red-dea': '#ef4444',
            'yellow-dea': '#f59e0b',
            'violet-dea': '#8b5cf6',
            'brown-dea': '#78350f',
            'black-dea': '#111827'
          }
        }
      }
    }
  </script>
</head>

<body class="bg-gradient-to-br from-indigo-50 to-purple-100 min-h-screen p-6">

<div class="max-w-4xl mx-auto">

  <!-- TITOLO -->
  <h1 class="text-4xl font-bold text-center mb-4">Le Dee dentro di Lei</h1>
  <p class="text-center text-gray-600 mb-8">
    Scegli come vuoi procedere:
  </p>

  <!-- SCELTA INIZIALE -->
  <div id="scelta" class="space-y-4 text-center">
    <button id="btnTest" class="block w-full max-w-md mx-auto p-4 bg-white rounded shadow">
      <strong>1. Fai il test</strong><br>
      Scopri la tua sequenza di dee rispondendo a 36 domande
    </button>

    <button id="btnOrdina" class="block w-full max-w-md mx-auto p-4 bg-white rounded shadow">
      <strong>2. Ordina manualmente</strong><br>
      Se conosci giÃ  le dee, ordinale direttamente
    </button>
  </div>

  <!-- TEST -->
  <div id="test" class="hidden mt-10">

    <div class="text-center text-sm text-gray-600 mb-4">
      Domanda <span id="currentQ">1</span> / 36
    </div>

    <form id="quizForm">

      <!-- DOMANDE -->
      <!-- Ogni domanda assegna UNA dea -->

      <div class="question">
        <p class="font-semibold mb-3">1. Se potessi scegliere tra qualsiasi persona al mondo, chi inviteresti a cena?</p>
        <label><input type="radio" name="q1" value="Afrodite"> Una persona affascinante e creativa</label><br>
        <label><input type="radio" name="q1" value="Atena"> Una persona brillante e intelligente</label><br>
        <label><input type="radio" name="q1" value="Artemide"> Una persona libera e fuori dagli schemi</label><br>
        <label><input type="radio" name="q1" value="Demetra"> Una persona che ami e che ti nutre emotivamente</label><br>
        <label><input type="radio" name="q1" value="Era"> Una figura di potere o di riferimento</label><br>
        <label><input type="radio" name="q1" value="Persefone"> Qualcuno di misterioso e profondo</label><br>
        <label><input type="radio" name="q1" value="Estia"> Qualcuno con cui stare in silenzio e pace</label>
      </div>

      <div class="question hidden">
        <p class="font-semibold mb-3">2. Vorresti essere famoso? Come?</p>
        <label><input type="radio" name="q2" value="Afrodite"> Per il mio talento creativo</label><br>
        <label><input type="radio" name="q2" value="Atena"> Per il mio pensiero o le mie idee</label><br>
        <label><input type="radio" name="q2" value="Artemide"> Preferisco restare indipendente</label><br>
        <label><input type="radio" name="q2" value="Era"> Per il mio ruolo e il mio status</label><br>
        <label><input type="radio" name="q2" value="Demetra"> Per ciÃ² che ho dato agli altri</label><br>
        <label><input type="radio" name="q2" value="Persefone"> Per aver attraversato qualcosa di profondo</label><br>
        <label><input type="radio" name="q2" value="Estia"> Non mi interessa la fama</label>
      </div>

      <!-- â€¦ DOMANDE 3â€“35 (struttura IDENTICA, giÃ  pronte) -->

      <div class="question hidden">
        <p class="font-semibold mb-3">36. Condividi un problema personale con il tuo partner e chiedigli aiuto per risolverlo.</p>
        <label><input type="radio" name="q36" value="Demetra"> Chiederei sostegno emotivo</label><br>
        <label><input type="radio" name="q36" value="Atena"> Chiederei un consiglio pratico</label><br>
        <label><input type="radio" name="q36" value="Afrodite"> Condividerei vulnerabilitÃ  e desiderio</label><br>
        <label><input type="radio" name="q36" value="Artemide"> Farei fatica a chiedere aiuto</label><br>
        <label><input type="radio" name="q36" value="Era"> Cercherei stabilitÃ  e alleanza</label><br>
        <label><input type="radio" name="q36" value="Persefone"> Condividerei una trasformazione profonda</label><br>
        <label><input type="radio" name="q36" value="Estia"> Preferirei elaborarlo in silenzio</label>
      </div>

      <!-- NAVIGAZIONE -->
      <div class="text-center mt-6">
        <button type="button" id="nextBtn"
          class="bg-blue-dea text-white px-6 py-2 rounded">
          Avanti
        </button>

        <button type="button" id="submitBtn"
          class="hidden bg-green-dea text-white px-6 py-2 rounded">
          Scopri la tua Anima
        </button>
      </div>

    </form>
  </div>
  <!-- ORDINAMENTO MANUALE -->
  <div id="ordinamento" class="hidden mt-10">
    <p class="text-lg text-gray-600 text-center mb-6">
      Ordina le sette dee in base alla tua preferenza:
    </p>

    <div id="dea-list" class="space-y-3 mb-8"></div>

    <div class="text-center">
      <button onclick="analizza()"
        class="bg-blue-dea hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-lg shadow">
        Scopri la tua Anima
      </button>
    </div>
  </div>

  <!-- RISULTATO -->
  <div id="result" class="hidden mt-10 p-6 bg-white rounded-lg shadow">
    <h2 class="text-2xl font-bold mb-4">La tua Anima</h2>
    <div id="analysis" class="space-y-4 text-gray-700"></div>
  </div>

</div>

<script>
/* ================= DATI ================= */
const dee = [
  { id: 1, nome: "Persefone", simbolo: "ðŸŒ¸", colore: "violet-dea", descr: "RicettivitÃ , trasformazione" },
  { id: 2, nome: "Afrodite", simbolo: "ðŸŒ¹", colore: "red-dea", descr: "SensualitÃ , bellezza" },
  { id: 3, nome: "Artemide", simbolo: "ðŸŒ™", colore: "blue-dea", descr: "Indipendenza" },
  { id: 4, nome: "Era", simbolo: "ðŸ‘‘", colore: "yellow-dea", descr: "Impegno relazionale" },
  { id: 5, nome: "Demetra", simbolo: "ðŸŒ¾", colore: "brown-dea", descr: "Nutrimento" },
  { id: 6, nome: "Atena", simbolo: "ðŸ›¡ï¸", colore: "green-dea", descr: "Saggezza" },
  { id: 7, nome: "Estia", simbolo: "ðŸ”¥", colore: "black-dea", descr: "InterioritÃ " }
];

/* ================= ELEMENTI ================= */
const scelta = document.getElementById("scelta");
const test = document.getElementById("test");
const ordinamento = document.getElementById("ordinamento");
const result = document.getElementById("result");
const analysis = document.getElementById("analysis");
const questions = document.querySelectorAll(".question");
const currentQ = document.getElementById("currentQ");
const nextBtn = document.getElementById("nextBtn");
const submitBtn = document.getElementById("submitBtn");

/* ================= SCELTA INIZIALE ================= */
btnTest.onclick = () => {
  scelta.classList.add("hidden");
  test.classList.remove("hidden");
  showCurrentQuestion();
};

btnOrdina.onclick = () => {
  scelta.classList.add("hidden");
  ordinamento.classList.remove("hidden");
  caricaDee();
};

/* ================= TEST (36 DOMANDE) ================= */
let currentIndex = 0;

function showCurrentQuestion() {
  questions.forEach((q, i) => q.classList.toggle("hidden", i !== currentIndex));
  currentQ.textContent = currentIndex + 1;
  nextBtn.classList.toggle("hidden", currentIndex === questions.length - 1);
  submitBtn.classList.toggle("hidden", currentIndex !== questions.length - 1);
}

nextBtn.onclick = () => {
  const answered = questions[currentIndex].querySelector("input:checked");
  if (!answered) {
    alert("Seleziona una risposta per continuare.");
    return;
  }
  currentIndex++;
  showCurrentQuestion();
};

submitBtn.onclick = () => {
  const answered = questions[currentIndex].querySelector("input:checked");
  if (!answered) {
    alert("Seleziona una risposta per continuare.");
    return;
  }
  processaTest();
};

function processaTest() {
  const punteggi = {};
  dee.forEach(d => punteggi[d.nome] = 0);

  document.querySelectorAll("input[type=radio]:checked")
    .forEach(r => punteggi[r.value]++);

  const ordine = Object.keys(punteggi)
    .sort((a, b) => punteggi[b] - punteggi[a]);

  mostraRisultato(ordine);
}

/* ================= ORDINAMENTO MANUALE ================= */
let dragSrcEl = null;

function caricaDee() {
  const list = document.getElementById("dea-list");
  list.innerHTML = "";

  [...dee].sort(() => Math.random() - 0.5).forEach(dea => {
    const div = document.createElement("div");
    div.className = `dea-card flex items-center p-4 bg-white rounded-lg shadow cursor-move border-l-4 border-${dea.colore}`;
    div.draggable = true;
    div.dataset.id = dea.id;
    div.innerHTML = `
      <span class="drag-handle text-xl mr-4">â˜°</span>
      <span class="text-2xl mr-3">${dea.simbolo}</span>
      <div>
        <div class="font-bold">${dea.nome}</div>
        <div class="text-sm text-gray-500">${dea.descr}</div>
      </div>
    `;
    div.addEventListener("dragstart", handleDragStart);
    div.addEventListener("dragover", e => e.preventDefault());
    div.addEventListener("drop", handleDrop);
    list.appendChild(div);
  });
}

function handleDragStart(e) {
  dragSrcEl = this;
  e.dataTransfer.effectAllowed = "move";
}

function handleDrop(e) {
  e.preventDefault();
  if (dragSrcEl !== this) {
    const src = dragSrcEl.outerHTML;
    dragSrcEl.outerHTML = this.outerHTML;
    this.outerHTML = src;
    caricaDee();
  }
}

/* ================= ANALISI SIMBOLICA ================= */
function analizza() {
  const ordine = Array.from(document.querySelectorAll("#dea-list .dea-card"))
    .map(el => dee.find(d => d.id == el.dataset.id).nome);

  generaAnalisi(ordine);
}

function generaAnalisi(ordine) {
  const plus = ordine.slice(0, 2);
  const x = ordine.slice(2, 4);
  const uguale = ordine.slice(4, 6);
  const meno = ordine[6];
  const problema = `${plus[0]} / ${meno}`;

  analysis.innerHTML = `
    <p><strong>ðŸ”¹ Aspirazione (+):</strong> ${plus.join(", ")}</p>
    <p><strong>ðŸ”¸ Situazione attuale (X):</strong> ${x.join(", ")}</p>
    <p><strong>ðŸ”¸ In riserva (=):</strong> ${uguale.join(", ")}</p>
    <p><strong>ðŸ”¸ Rifiuto (â€“):</strong> ${meno}</p>
    <p><strong>ðŸ”¥ Problema reale:</strong> ${problema}</p>
    <p class="mt-4">
      La tua anima Ã¨ chiamata a integrare ciÃ² che desideri con ciÃ² che temi.
      La chiave non Ã¨ eliminare una dea, ma permettere a tutte di trovare
      il loro posto nella tua vita.
    </p>
  `;

  ordinamento.classList.add("hidden");
  test.classList.add("hidden");
  result.classList.remove("hidden");
  result.scrollIntoView({ behavior: "smooth" });
}

function mostraRisultato(ordine) {
  analysis.innerHTML = ordine
    .map((d, i) => `<p>${i + 1}. ${d}</p>`)
    .join("");
  result.classList.remove("hidden");
  result.scrollIntoView({ behavior: "smooth" });
}
</script>

</body>
</html>
