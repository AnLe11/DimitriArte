<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Le Dee dentro di Lei</title>

<script src="https://cdn.tailwindcss.com"></script>
<script>
tailwind.config = {
  theme: {
    extend: {
      colors: {
        'blue-dea': '#3b82f6',
        'green-dea': '#10b981',
        'red-dea': '#ef4444',
        'yellow-dea': '#f59e0b',
        'violet-dea': '#8b5cf6',
        'brown-dea': '#78350f',
        'black-dea': '#111827'
      }
    }
  }
}
</script>

<style>
.drag-handle { cursor: move; user-select: none; }
.dea-card { transition: transform .2s, box-shadow .2s; }
.dea-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 10px 15px -3px rgba(0,0,0,.1);
}
</style>
</head>

<body class="bg-gradient-to-br from-indigo-50 to-purple-100 min-h-screen p-6">

<div class="max-w-4xl mx-auto">

<h1 class="text-4xl font-bold text-center mb-4">Le Dee dentro di Lei</h1>
<p class="text-center text-gray-600 mb-8">Scegli come vuoi procedere:</p>

<!-- SCELTA -->
<div id="scelta" class="space-y-4 text-center">
  <button id="btnTest" class="w-full max-w-md mx-auto p-4 bg-white rounded shadow">
    <strong>1. Fai il test</strong><br>36 domande introspettive
  </button>
  <button id="btnOrdina" class="w-full max-w-md mx-auto p-4 bg-white rounded shadow">
    <strong>2. Ordina manualmente</strong><br>Drag & Drop delle dee
  </button>
</div>

<!-- TEST -->
<div id="test" class="hidden mt-10">
  <div class="text-center text-sm text-gray-600 mb-4">
    Domanda <span id="currentQ">1</span> / 36
  </div>

  <form id="quizForm">

    <!-- DOMANDE -->
    <!-- Tutte e 36, una per una -->
    <!-- (per brevità qui mostro struttura completa, già funzionante) -->

    <!-- GENERAZIONE STATICA -->
    <script>
      const testiDomande = [
        "Se potessi scegliere tra qualsiasi persona al mondo, chi inviteresti a cena?",
        "Vorresti essere famoso? Come?",
        "Prima di fare una telefonata, fai le prove di quello che dirai?",
        "Definisci qual è il giorno perfetto per te",
        "Quando hai cantato l’ultima volta?",
        "Corpo o mente giovane per 60 anni?",
        "Pensi mai alla morte?",
        "Tre cose in comune con il partner",
        "Di cosa sei più grato?",
        "Cosa cambieresti della tua educazione?",
        "Racconta la tua vita",
        "Quale qualità vorresti svegliandoti?",
        "Cosa vorresti sapere da una sfera di cristallo?",
        "Un sogno mai realizzato?",
        "Il tuo più grande risultato",
        "Cosa conta in un’amicizia?",
        "Il ricordo più caro",
        "Il più terribile",
        "Se morissi in un anno?",
        "Cosa significa amicizia?",
        "Che ruolo ha l’amore?",
        "Cinque qualità reciproche",
        "Quanto era affettuosa la tua famiglia?",
        "Che rapporto hai con tua madre?",
        "Tre frasi con “noi”",
        "Vorrei aver condiviso…",
        "Un segreto importante",
        "Cosa ti piace del partner",
        "Un momento imbarazzante",
        "Quando hai pianto?",
        "Una qualità che ammiri",
        "Cosa è troppo serio per scherzare?",
        "Cosa rimpiangi di non aver detto?",
        "Casa in fiamme: cosa salvi?",
        "Quale morte ti colpirebbe di più?",
        "Condividi un problema personale"
      ];

      const dee = ["Afrodite","Atena","Artemide","Demetra","Era","Persefone","Estia"];

      document.write(
        testiDomande.map((t,i)=>`
        <div class="question ${i>0?'hidden':''}">
          <p class="font-semibold mb-3">${i+1}. ${t}</p>
          ${dee.map(d=>`
            <label>
              <input type="radio" name="q${i+1}" value="${d}"> ${d}
            </label><br>`).join("")}
        </div>`).join("")
      );
    </script>

    <div class="text-center mt-6">
      <button type="button" id="nextBtn"
        class="bg-blue-dea text-white px-6 py-2 rounded">Avanti</button>
      <button type="button" id="submitBtn"
        class="hidden bg-green-dea text-white px-6 py-2 rounded">Scopri la tua Anima</button>
    </div>

  </form>
</div>

<!-- ORDINAMENTO -->
<div id="ordinamento" class="hidden mt-10">
  <p class="text-center mb-6">Trascina le dee in ordine di importanza</p>
  <div id="dea-list" class="space-y-3 mb-8"></div>
  <div class="text-center">
    <button onclick="analizza()" class="bg-blue-dea text-white px-8 py-3 rounded-lg">
      Scopri la tua Anima
    </button>
  </div>
</div>

<!-- RISULTATO -->
<div id="result" class="hidden mt-10 bg-white p-6 rounded shadow">
  <h2 class="text-2xl font-bold mb-4">La tua Anima</h2>
  <div id="analysis" class="space-y-3"></div>
</div>

</div>

<script>
/* ELEMENTI */
const scelta = document.getElementById("scelta");
const test = document.getElementById("test");
const ordinamento = document.getElementById("ordinamento");
const result = document.getElementById("result");
const analysis = document.getElementById("analysis");
const questions = document.querySelectorAll(".question");
const currentQ = document.getElementById("currentQ");
const nextBtn = document.getElementById("nextBtn");
const submitBtn = document.getElementById("submitBtn");

let idx = 0;

/* SCELTA */
btnTest.onclick = () => { scelta.classList.add("hidden"); test.classList.remove("hidden"); showQ(); }
btnOrdina.onclick = () => { scelta.classList.add("hidden"); ordinamento.classList.remove("hidden"); caricaDee(); }

/* TEST */
function showQ(){
  questions.forEach((q,i)=>q.classList.toggle("hidden",i!==idx));
  currentQ.textContent = idx+1;
  nextBtn.classList.toggle("hidden", idx===questions.length-1);
  submitBtn.classList.toggle("hidden", idx!==questions.length-1);
}

nextBtn.onclick = ()=>{
  if(!questions[idx].querySelector("input:checked")){alert("Seleziona una risposta");return;}
  idx++; showQ();
};

submitBtn.onclick = ()=>processaTest();

function processaTest(){
  const score={}; dee.forEach(d=>score[d]=0);
  document.querySelectorAll("input:checked").forEach(r=>score[r.value]++);
  mostraRisultato(Object.keys(score).sort((a,b)=>score[b]-score[a]));
}

/* DRAG & DROP */
let dragSrc=null;
function caricaDee(){
  const list=document.getElementById("dea-list"); list.innerHTML="";
  dee.forEach(d=>{
    const div=document.createElement("div");
    div.className="dea-card p-4 bg-white rounded shadow cursor-move";
    div.draggable=true; div.textContent=d;
    div.ondragstart=()=>dragSrc=div;
    div.ondragover=e=>e.preventDefault();
    div.ondrop=e=>{e.preventDefault(); if(dragSrc!==div) list.insertBefore(dragSrc,div);}
    list.appendChild(div);
  });
}

function analizza(){
  const ordine=[...document.querySelectorAll("#dea-list .dea-card")].map(d=>d.textContent);
  mostraRisultato(ordine);
}

/* RISULTATO */
function mostraRisultato(ordine){
  test.classList.add("hidden");
  ordinamento.classList.add("hidden");
  result.classList.remove("hidden");
  analysis.innerHTML=ordine.map((d,i)=>`<p>${i+1}. ${d}</p>`).join("");
}
</script>

</body>
</html>
